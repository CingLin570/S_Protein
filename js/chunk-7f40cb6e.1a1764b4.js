(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f40cb6e"],{"13d5":function(t,e,s){"use strict";var a=s("23e7"),r=s("d58f").left,i=s("a640"),n=s("ae40"),c=i("reduce"),o=n("reduce",{1:0});a({target:"Array",proto:!0,forced:!c||!o},{reduce:function(t){return r(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"2e05":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("step-progress",{attrs:{steps:t.mySteps,"current-step":t.steps,"line-thickness":t.line,"icon-class":"fa fa-check","active-color":"#5CA8CA","active-thickness":3}})},r=[],i=(s("a9e3"),{props:{steps:{type:Number,default:function(){return{}}}},data:function(){return{mySteps:["購物車","填寫訂單","訂單確認"],line:3}}}),n=i,c=(s("b31c"),s("2877")),o=Object(c["a"])(n,a,r,!1,null,null,null);e["a"]=o.exports},"63f7":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pt-7"},[s("div",{staticClass:"mb-5"},[s("Progress",{attrs:{steps:t.currentStep}})],1),s("div",{staticClass:"container mb-4"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col"},[s("div",{staticClass:"card"},[s("div",{staticClass:"card-body pt-0 px-0"},[s("table",{staticClass:"table"},[t._m(0),s("tbody",{staticClass:"text-center"},[t._l(t.order.products,(function(e,a){return s("tr",{key:a,staticClass:"ordercontent text-center"},[s("th",{staticClass:"px-0 ordercontent-item"},[s("img",{attrs:{src:e.product.imageUrl[0],height:"70px",alt:""}}),s("p",{staticClass:"m-0"},[t._v(t._s(e.product.title))])]),s("td",{staticClass:"px-0 align-middle ordercontent-item"},[t._v(t._s(e.quantity)+t._s(e.product.unit))]),s("td",{staticClass:"px-0 align-middle ordercontent-item"},[t._v(t._s(t._f("total")(t.originPrice)))])])})),t.order.coupon?s("tr",[s("td"),s("th",{attrs:{scope:"row"}},[t._v("折扣")]),s("td",[t._v(t._s(t._f("total")(t.discountPrice)))])]):s("tr",[s("td"),s("th",{attrs:{scope:"row"}},[t._v("折扣")]),s("td",[t._v("0")])]),s("tr",[s("td"),s("th",{attrs:{scope:"row"}},[t._v("總計")]),s("td",[t._v(t._s(t._f("total")(t.totalPrice)))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("訂購人姓名")]),s("td"),s("td",[t._v(t._s(t.order.user.name))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("訂購人電子信箱")]),s("td"),s("td",[t._v(t._s(t.order.user.email))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("訂購人電話")]),s("td"),s("td",[t._v(t._s(t.order.user.tel))])]),s("tr",[s("th",{attrs:{scope:"row"}},[t._v("訂購人地址")]),s("td"),s("td",[t._v(t._s(t.order.user.address))])])],2)]),s("div",{staticClass:"d-flex justify-content-center"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.payingOrder}},[t._v("確認付款")])])])])])])]),s("Footer")],1)},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",{staticClass:"thead-dark"},[s("tr",{staticClass:"text-center"},[s("th",{attrs:{scope:"col"}},[t._v("購買品項")]),s("th",{attrs:{scope:"col"}},[t._v("購買數量")]),s("th",{attrs:{scope:"col"}},[t._v("購買總價")])])])}],i=(s("99af"),s("13d5"),s("acd4")),n=s("2e05"),c={components:{Footer:i["a"],Progress:n["a"]},data:function(){return{currentStep:2,order:{products:[],coupon:null,amount:0,user:{name:"",address:"",tel:"",email:""}},pageId:""}},created:function(){this.pageId=this.$route.params.orderid,this.getOrder()},computed:{originPrice:function(){return this.order.products.reduce((function(t,e){return t+e.product.price*e.quantity}),0)},discountPrice:function(){return Math.round(this.originPrice*((100-this.order.coupon.percent)/100))},totalPrice:function(){return Math.round(this.order.amount)}},methods:{getOrder:function(){var t=this,e=this.$loading.show(),s="".concat("https://course-ec-api.hexschool.io","/api/").concat("958a050f-3e4c-4878-9e46-1770b3152f41","/ec/orders/").concat(this.pageId);this.$http.get(s).then((function(s){t.order=s.data.data,e.hide()})).catch((function(e){var s=e.response.data.errors;t.$bus.$emit("message:push","錯誤 ".concat(s),"danger")}))},payingOrder:function(){var t=this,e=this.$loading.show(),s="".concat("https://course-ec-api.hexschool.io","/api/").concat("958a050f-3e4c-4878-9e46-1770b3152f41","/ec/orders/").concat(this.pageId,"/paying");this.$http.post(s).then((function(){t.$bus.$emit("message:push","訂單建立成功","success"),t.$router.push("/ordersuccess"),e.hide()})).catch((function(){t.$bus.$emit("message:push","訂單建立失敗","danger"),e.hide()}))}}},o=c,l=(s("aa32"),s("2877")),d=Object(l["a"])(o,a,r,!1,null,null,null);e["default"]=d.exports},"87b4":function(t,e,s){"use strict";var a=s("c63d"),r=s.n(a);r.a},"883f":function(t,e,s){},aa32:function(t,e,s){"use strict";var a=s("da59"),r=s.n(a);r.a},acd4:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"footer"},[s("div",{staticClass:"bg-light py-4"},[s("div",{staticClass:"container"},[s("div",{staticClass:"d-flex flex-column flex-md-row justify-content-between align-items-md-center align-items-start"},[s("p",{staticClass:"footerTitle mb-0"},[t._v("歡迎訂閱獲得更多搶先優惠資訊以及折扣碼")]),s("validation-observer",{scopedSlots:t._u([{key:"default",fn:function(e){var a=e.invalid;return[s("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.searchCoupon(e)}}},[s("validation-provider",{staticClass:"d-flex",attrs:{rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.errors,i=e.classes;return[s("div",{staticClass:"input-group mt-md-0 mt-3"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control rounded-0",class:i,attrs:{type:"email",placeholder:"請輸入電子信箱"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary text-black rounded-0",attrs:{id:"search",disabled:a}},[t._v(" 訂閱 ")])]),r[0]?s("span",{staticClass:"d-flex align-items-center text-danger"},[t._v("信箱"+t._s(""+r[0].slice(8,r[0].length)))]):t._e()])]}}],null,!0)})],1)]}}])})],1)])]),t._m(0)])},r=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bg-white py-5"},[s("div",{staticClass:"container"},[s("div",{staticClass:"d-flex align-items-center justify-content-between text-primary mb-md-7 mb-4"},[s("a",{staticClass:"footerLogo font-style text-primary",attrs:{href:"./index.html"}},[t._v("S Protein")]),s("ul",{staticClass:"d-flex list-unstyled mb-0 h4"},[s("li",[s("a",{staticClass:"text-primary mx-2 mx-md-3",attrs:{href:"https://www.facebook.com/profile.php?id=100002626446604"}},[s("i",{staticClass:"fab fa-facebook"})])]),s("li",[s("a",{staticClass:"text-primary mx-2 mx-md-3",attrs:{href:"https://www.instagram.com/cinglin54570/"}},[s("i",{staticClass:"fab fa-instagram"})])]),s("li",[s("a",{staticClass:"text-primary ml-2 ml-md-3",attrs:{href:"https://github.com/CingLin570/s_protein"}},[s("i",{staticClass:"fab fa-github"})])])])]),s("div",{staticClass:"d-flex flex-column flex-md-row justify-content-between align-items-md-end align-items-start text-primary"},[s("div",{staticClass:"mb-md-0 mb-1"},[s("p",{staticClass:"mb-0"},[t._v("所有圖片為練習使用，無商業用途。")])]),s("p",{staticClass:"mb-0"},[t._v("© 2020 LOGO All Rights Reserved.")])])])])}],i={data:function(){return{email:""}},methods:{searchCoupon:function(){this.email?this.$bus.$emit("message:push","優惠碼:cinglin570","success"):this.$bus.$emit("message:push","信箱格式錯誤","danger")}}},n=i,c=(s("87b4"),s("2877")),o=Object(c["a"])(n,a,r,!1,null,null,null);e["a"]=o.exports},b31c:function(t,e,s){"use strict";var a=s("883f"),r=s.n(a);r.a},c63d:function(t,e,s){},d58f:function(t,e,s){var a=s("1c0b"),r=s("7b0b"),i=s("44ad"),n=s("50c4"),c=function(t){return function(e,s,c,o){a(s);var l=r(e),d=i(l),u=n(l.length),p=t?u-1:0,f=t?-1:1;if(c<2)while(1){if(p in d){o=d[p],p+=f;break}if(p+=f,t?p<0:u<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:u>p;p+=f)p in d&&(o=s(o,d[p],p,l));return o}};t.exports={left:c(!1),right:c(!0)}},da59:function(t,e,s){}}]);